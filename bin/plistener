#!/usr/bin/env ruby

require 'commander/import'
require 'plistener'

# :name is optional, otherwise uses the basename of this executable
program :name, 'plistener'
program :version, Plistener::VERSION
program :description, Plistener.readme('summary')

command :run do |c|
  c.syntax = Plistener.readme 'run:syntax'
  c.description = Plistener.readme 'run:description'
  c.option '--config STRING', String, 'the config file to use'
  c.action do |args, options|
    working_dir = args.first || Dir.pwd
    Plistener.run working_dir
  end
end
